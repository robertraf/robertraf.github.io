{"version":3,"sources":["components/f7View.js","components/f7Page.js","core/framework7.js"],"names":["dmx","Component","constructor","node","parent","this","onPageInit","bind","onPageBeforeRemove","BaseComponent","call","methods","navigate","url","options","view","router","back","refresh","refreshPage","clearHistory","clearPreviousHistory","render","f7View","on","onPageReinit","$parse","page","child","el","set","route","children","push","name","data","dmxComponent","index","findIndex","$node","del","splice","destroy","off","initialData","config","mapping"],"mappings":";;;;;;AAAAA,IAAAC,UAAA,UAAA,CAEAC,YAAA,SAAAC,EAAAC,GACAC,KAAAC,WAAAD,KAAAC,WAAAC,KAAAF,MACAA,KAAAG,mBAAAH,KAAAG,mBAAAD,KAAAF,MAEAL,IAAAS,cAAAC,KAAAL,KAAAF,EAAAC,IAGAO,QAAA,CAEAC,SAAA,SAAAC,EAAAC,GACAT,KAAAU,KAAAC,QACAX,KAAAU,KAAAC,OAAAJ,SAAAC,EAAAC,IAIAG,KAAA,SAAAJ,EAAAC,GACAT,KAAAU,KAAAC,QACAX,KAAAU,KAAAC,OAAAC,KAAAJ,EAAAC,IAIAI,QAAA,WACAb,KAAAU,KAAAC,QACAX,KAAAU,KAAAC,OAAAG,eAIAC,aAAA,WACAf,KAAAU,KAAAC,QACAX,KAAAU,KAAAC,OAAAK,yBAMAC,OAAA,SAAAnB,GACAE,KAAAU,KAAAZ,EAAAoB,OAEAlB,KAAAU,KAAAS,GAAA,WAAAnB,KAAAC,YACAD,KAAAU,KAAAS,GAAA,aAAAnB,KAAAoB,cACApB,KAAAU,KAAAS,GAAA,mBAAAnB,KAAAG,oBAEAH,KAAAqB,UAGApB,WAAA,SAAAqB,GACA,IACAC,EAAA,IADA5B,IAAAC,UAAA,WACA,CAAA0B,EAAAE,GAAAxB,MACAuB,EAAAE,IAAA,QAAAH,EAAAI,OACA1B,KAAA2B,SAAAC,KAAAL,GACAvB,KAAAyB,IAAAF,EAAAM,KAAAN,EAAAO,MACAR,EAAAS,aAAAR,GAGAH,aAAA,SAAAE,GACAA,EAAAS,cACAT,EAAAS,aAAAN,IAAA,QAAAH,EAAAI,QAIAvB,mBAAA,SAAAmB,GACA,IAAAU,EAAAhC,KAAA2B,SAAAM,UAAA,SAAAV,GACA,OAAAA,EAAAW,OAAAZ,EAAAE,MAEA,GAAAQ,IACAhC,KAAAmC,IAAAnC,KAAA2B,SAAAK,GAAAH,MACA7B,KAAA2B,SAAAS,OAAAJ,EAAA,KAIAK,QAAA,WACArC,KAAAU,KAAA4B,IAAA,WAAAtC,KAAAC,YACAD,KAAAU,KAAAS,GAAA,aAAAnB,KAAAoB,cACApB,KAAAU,KAAA4B,IAAA,mBAAAtC,KAAAG,uBC3EAR,IAAAC,UAAA,UAAA,CAEA2C,YAAA,CACAb,MAAA,MAGAT,OAAA,SAAAnB,GACAE,KAAAqB,YCPA1B,IAAA6C,OAAAC,QAAA,SAAA,UACA9C,IAAA6C,OAAAC,QAAA,SAAA","file":"../dmxFramework7/dmxFramework7.js","sourcesContent":["dmx.Component('f7-view', {\r\n\r\n    constructor: function (node, parent) {\r\n        this.onPageInit = this.onPageInit.bind(this);\r\n        this.onPageBeforeRemove = this.onPageBeforeRemove.bind(this);\r\n\r\n        dmx.BaseComponent.call(this, node, parent);\r\n    },\r\n\r\n    methods: {\r\n\r\n        navigate: function (url, options) {\r\n            if (this.view.router) {\r\n                this.view.router.navigate(url, options);\r\n            }\r\n        },\r\n\r\n        back: function (url, options) {\r\n            if (this.view.router) {\r\n                this.view.router.back(url, options);\r\n            }\r\n        },\r\n\r\n        refresh: function() {\r\n            if (this.view.router) {\r\n                this.view.router.refreshPage();\r\n            }\r\n        },\r\n\r\n        clearHistory: function() {\r\n            if (this.view.router) {\r\n                this.view.router.clearPreviousHistory();\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    render: function (node) {\r\n        this.view = node.f7View;\r\n\r\n        this.view.on('pageInit', this.onPageInit);\r\n        this.view.on('pageReinit', this.onPageReinit);\r\n        this.view.on('pageBeforeRemove', this.onPageBeforeRemove);\r\n\r\n        this.$parse();\r\n    },\r\n\r\n    onPageInit: function (page) {\r\n        var Component = dmx.Component('f7-page');\r\n        var child = new Component(page.el, this);\r\n        child.set('route', page.route);\r\n        this.children.push(child);\r\n        this.set(child.name, child.data);\r\n        page.dmxComponent = child;\r\n    },\r\n\r\n    onPageReinit: function (page) {\r\n        if (page.dmxComponent) {\r\n            page.dmxComponent.set('route', page.route);\r\n        }\r\n    },\r\n\r\n    onPageBeforeRemove: function (page) {\r\n        var index = this.children.findIndex(function (child) {\r\n            return child.$node == page.el;\r\n        });\r\n        if (index != -1) {\r\n            this.del(this.children[index].name);\r\n            this.children.splice(index, 1);\r\n        }\r\n    },\r\n\r\n    destroy: function () {\r\n        this.view.off('pageInit', this.onPageInit);\r\n        this.view.on('pageReinit', this.onPageReinit);\r\n        this.view.off('pageBeforeRemove', this.onPageBeforeRemove);\r\n    }\r\n\r\n});","dmx.Component('f7-page', {\r\n\r\n    initialData: {\r\n        route: null\r\n    },\r\n\r\n    render: function (node) {\r\n        this.$parse();\r\n    }\r\n\r\n});","dmx.config.mapping['.view'] = 'f7-view';\r\ndmx.config.mapping['.page'] = 'f7-page';"]}